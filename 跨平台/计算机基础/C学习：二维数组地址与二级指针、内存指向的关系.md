**目录**
[toc]

标题：C学习：二维数组地址与二级指针、内存指向的关系


## 二维数组地址与内存指向的关系
--------

示例代码：
```c
    int b_arr[][3] = { {3, 2, 5},
                   {1, 9, 8},
                   {6, 2, 9},
                   {5, 2, 4} };

    int *p1 = &a_arr;
    int *p2 = a_arr;
    int *p3 = &b_arr;
    int *p4 = b_arr;
    int *p5 = &b_arr[0][0];
    int *p6 = &b_arr[0][1];
    int *p7 = p5 + 1;
    int **p8 = b_arr; //b_arr是指向首位元素的指针类型，而非指向指针的的指针

    printf("&a_arr=%p a_arr=%p\n", p1, p2);
    printf("&b_arr=%p b_arr=%p\n", p3, p4);
    printf("&b_arr[0][0]=%p &b_arr[0][1]=%p\n", p5, p6);
    printf("p5 + 1 = %p\n", p7);
    printf("b_arr[0][0]=%d b_arr[0][1]=%d\n", *p3, *p6);
 //   printf("**p8=%d", **p8); //用法错误，无正常输出
```

输出结果：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20210504165943489.png)
现象分析：
 - 可以看出栈空间声明定义的二维数组本质是二级指针
 - 不管是二维数组还是三维数组，只要元素类型确定，对具体变量元素或者数组名（数组元素首地址）取地址，指针类型均为1个 `*`
 - 而指向指针的指针 如 `int **a`，必须是对指针取地址才能得到，比如以下示例：

```c
int a = 10;
int *p1 = &a;
int **p2 = &p1;
pirntf("a=%d", **p2);
```

下面需要理清下：数组名首地址和数组首元素地址，虽然值一样，但意义不同。

以下代表连续内存空间：
【1】【2】【3】【4】【5】【6】【7】【8】 ....

```c
int a[3][2]; 	//二维数组
int (*b)[2]; 	//指向两个元素的数组指针
b = a; 			//取数组首元素指针
b++; 			//挪到下一行
int val = b[0]; //表示该行第一个元素
val = b[1];		//表示该行第二个元素
```
 - `&a[0][0]`表示第一个元素的地址 
 -  `a`数组名也可以直接表示数组地址，与`&a[0][0]`等价
 - `&a`表示取整个数组首地址，是一级指针


## 取数组名和对数组名取地址的区别
--------

示例代码:
```c
#include<stdio.h>   
int main()   
{   
    int a[10];   
    printf("a:/t%p/n", a);            
    printf("&a:/t%p/n", &a);          
    printf("a+1:/t%p/n", a+1);        
    printf("&a+1:/t%p/n", &a+1);     
    return 0;   
}  
```

运行结果：

```c
/*   
a:          0012FF20  
&a:         0012FF20  
a+1:        0012FF24  
&a+1:       0012FF48  
*/  
```

分析:

 - 其实`a`和 `&a`结果都是数组的首地址，但两者类型不一样。
 - `a`表示`&a[0]`,也即对数组首元素取地址，`a+1`表示：`首地址 + sizeof(元素类型)`。
 - `&a`虽然值为数组首元素地址，但类型为数组指针：`类型 (*)[数组元素个数]`,所以`&a+1`大小为：`首地址 + sizeof(a)`。


## 参考资料
----------

 1. [C语言的数组名和对数组名取地址](https://www.cnblogs.com/zhoug2020/p/6053339.html)
 2. [C学习：动态申请二维数组的方法](https://blog.csdn.net/qq_17256689/article/details/116116818)
 3. [C学习：数组指针和指针数组辨析](https://blog.csdn.net/qq_17256689/article/details/109543840)